components:
  common:
    name: name
  specs:
    app_1:
      deployment:
        metadata:
          name: terraform-example
          labels:
            test: "ExampleApp"
        spec:
          selector:
            match_labels:
              test: "ExampleApp"
          template:
            metadata:
              labels:
                test: "ExampleApp"
            spec:
              container:
                - image: "nginx:1.7.8"
                  name: "example"
                  resources:
                    limits:
                      cpu: "0.5"
                      memory: "512Mi"
                    requests:
                      cpu: "250m"
                      memory: "50Mi"
                  liveness_probe:
                    http_get:
                      path: "/nginx_status"
                      port: 80
                      http_header:
                        name: "X-Custom-Header"
                        value: "Awesome"
                    initial_delay_seconds: 3
                    period_seconds: 3

      config_map:
        metadata:
          name: "config"
          labels:
            env: "test"
        data:
          api_host: "myhost:433"
          db_host: "dbhost:5432"
        data_file:
          - ../resources/mosquitto.conf
        binary_data:
          bar: L3Jvb3QvMTAw
        binary_file:
          - ../resources/binary.bin
      secret:
        metadata:
          name: "basic-auth"
        type: "kubernetes.io/basic-auth"
        data:
          username: "admin"
          password: "password"
      service:
        metadata:
          name: "terraform-example"
        spec:
          session_affinity: "ClientIP"
          selector:
            app: "terraform-example"
          port:
            - port: 8080
              target_port: 80
          type: LoadBalancer
    app_2:
      pod_autoscaler:
        metadata:
          name: test
        spec:
          max_replicas: 100
          min_replicas: 50
          scale_target_ref:
            kind: Deployment
            name: MyApp
          metric:
            type: External
            external:
              metric:
                name: latency
                selector:
                  match_labels:
                    lb_name: test
              target:
                type: Value
                value: 100
      pod:
        metadata:
          name: "nginx-example"
          namespace:
          labels:
            app: "nginx"
        spec:
          container:
            - name: "nginx-example"
              image: "nginx:1.7.8"
              port:
                - container_port: 80

      service_account:
        metadata:
          name: "pod-app-service-account"
        #image_pull_secret:
        #  - name: pod-app-secret-file
        #  - name: name_2
        secret:
          - name: "pod-app-secret-file"
        automount_service_account_token:
          true
    app_3:
      ingress:
        metadata:
          name: "example-ingress"
        spec:
          backend:
            service_name: "service"
            service_port: 8080
          rule:
            host:
            http:
              paths:
                - path: "/"
                  backend:
                    service_port: 8080
                    service_name: "service"
      stateful_set:
        metadata:
          name: "test-stateful-set"
          labels:
            app: "test"
        spec:
          selector:
            match_labels:
              app: "test"
          template:
            metadata:
              name: "test-stateful-set"
              labels:
                app: "test"
            spec:
              env:
                name: "test-stateful-set"
                value: test
              container:
                - name: "test-stateful-set"
                  image: "nginx:1.7.8"
                  port:
                    - container_port: 8080
                  liveness_probe:
                    http_get:
                      port: 80
                      http_header:
                        name: X-Custom-Header
                        value: Awesome
                    initial_delay_seconds: 3
                    period_seconds: 3

    app_4:
      k8s_persistent_volume_claim:
        metadata:
          name: perisistent-volume-claim
        spec:
          access_modes:
            - "ReadWriteMany"
          resources:
            requests:
              storage: "2Gi"
          volume_name: "pv-test"
      pod:
        metadata:
          name: "nginx-example-2"
          namespace:
          labels:
            app: "nginx"
        spec:
          container:
            - name: "nginx-example-2"
              image: "nginx:1.7.8"
              port:
                - container_port: 80
      cron_job:
        metadata:
          name: demo
        spec:
          concurrency_policy: Replace
          failed_jobs_history_limit: 5
          schedule: "1 0 * * *"
          starting_deadline_seconds: 10
          successful_jobs_history_limit: 10
          job_template:
            spec:
              backoff_limit: 2
              ttl_seconds_after_finished: 10
              template:
                spec:
                  container:
                    - name: hello
                      image: busybox
                      command:
                        - "/bin/sh"
                        - "-c"
                        - "date; echo Hello from Kubernetes cluster"

    default:
      manual_scaling:
        instances: 1
      root_dir: mcp
      runtime: java8
      build_dir: build
